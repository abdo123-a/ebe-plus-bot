# ๐ EBE Plus Bot Control Panel  
ูุธุงู ุฅุฏุงุฑุฉ ููุฑุงุณูุฉ ูุจูุชุงุช ุชูููุฌุฑุงู ุนุจุฑ ูุงุฌูุฉ ููุจ ุชูุงุนููุฉุ ูุน ุชุฎุฒูู ูุงูู ููุฃุฑุดูู ูู Firebase ูุฏุนู ุงูุชุญุฏูุซ ุงููุญุธู ุนุจุฑ Socket.io.

---

# ๐๏ธ **Project Structure**
```
ebe-plus-bot/
โโโ index.js                # ุงูููู ุงูุฑุฆูุณู ููุณูุฑูุฑ ูุงูููุทู
โโโ package.json            # ุฅุนุฏุงุฏุงุช ุงููุดุฑูุน ูุงูููุชุจุงุช
โโโ .replit                 # ุฅุนุฏุงุฏุงุช Replit
โโโ .gitignore              # ุงููููุงุช ุงููุณุชุซูุงุฉ ูู Git
โโโ public/                 # ูุงุฌูุฉ ุงููุณุชุฎุฏู (Frontend)
โ   โโโ index.html
โโโ assets/                 # ูููุงุช ุฅุถุงููุฉ (ูุซู ุงูุฃุตูุงุช)
```

---

# ๐๏ธ **Firebase Realtime Database Schema**

## **chats_list/{chatId}**  
ูุญุชูู ุนูู ุจูุงูุงุช ุชุธูุฑ ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ:  
- first_name  
- last_name  
- username  
- last_message  
- ts  

## **users/{chatId}**  
ุชูุงุตูู ุงููุณุชุฎุฏู:  
- id  
- first_name  
- username  
- language_code  

## **messages/{chatId}/{messageId}**  
ุณุฌู ุงููุญุงุฏุซุฉ (ุงููุงุฆู ุงููุงูู ูู ุชูููุฌุฑุงู):  
- update_id  
- message  

---

# ๐ **API Reference**

## 1. **Authentication**
### `POST /api/login`  
ุชุณุฌูู ุงูุฏุฎูู.  
Body:
```json
{ "password": "..." }
```

### `GET /api/checkAuth`  
ุงูุชุญูู ูู ุชุณุฌูู ุงูุฏุฎูู ููุฌูุณุฉ ุงูุญุงููุฉ.

---

## 2. **Messaging**

### `POST /webhook`  
ููุทุฉ ุงุณุชูุจุงู ุชุญุฏูุซุงุช ุชูููุฌุฑุงู (ูุง ูุชู ุงุณุชุฏุนุงุคู ูุฏููุงู).

### `POST /api/sendText`  
ุฅุฑุณุงู ุฑุณุงูุฉ ูุตูุฉ.  
Body:
```json
{
  "chat_id": 123,
  "text": "Hello",
  "reply_to_message_id": 123
}
```

### `POST /api/sendFile`  
ุฑูุน ูุฅุฑุณุงู ูููุงุช (ุตูุฑุ ุตูุชุ ูุณุชูุฏุงุช).  
FormData:
- chat_id  
- file  
- reply_to_message_id  

### `POST /api/editMessage`  
ุชุนุฏูู ุฑุณุงูุฉ.  
Body:
```json
{
  "chat_id": 123,
  "message_id": 456,
  "text": "New Text"
}
```

### `POST /api/deleteMessage`  
ุญุฐู ุฑุณุงูุฉ.  
Body:
```json
{
  "chat_id": 123,
  "message_id": 456
}
```

---

## 3. **Data & Retrieval**

### `GET /api/chats`  
ุฌูุจ ูุงุฆูุฉ ุงููุญุงุฏุซุงุช (Sidebar).

### `GET /api/messages/:chatId`  
ุฌูุจ ุฌููุน ุฑุณุงุฆู ูุญุงุฏุซุฉ ูุญุฏุฏุฉ.

### `GET /api/user/:chatId`  
ุฌูุจ ูุนูููุงุช ุงููุณุชุฎุฏู.

### `GET /api/proxyFile/:file_id`  
ุฌูุจ ูููุงุช ุชูููุฌุฑุงู ุนุจุฑ Proxy ูุชุฌูุจ CORS ูุงูุชูุงุก ุตูุงุญูุฉ ุงูุฑูุงุจุท.

---

# โก **Socket.io Events**

## **Server โ Client**
| ุงูุญุฏุซ | ุงูุจูุงูุงุช | ุงููุตู |
|------|----------|--------|
| `update` | { chatId, message } | ูุตูู ุฑุณุงูุฉ ุฌุฏูุฏุฉ ุฃู ุฅุฑุณุงู ุฑุณุงูุฉ ูู ุงูุจูุช |
| `message_deleted` | { chat_id, message_id } | ุญุฐู ุฑุณุงูุฉ ูุชุญุฏูุซ ุงููุงุฌูุฉ |
| `message_edited` | { chat_id, message_id, text } | ุชุนุฏูู ูุต ุฑุณุงูุฉ ูู ุงููุงุฌูุฉ |
| `delete_chat` | { chatId } | ุญุฐู ูุญุงุฏุซุฉ ุจุงููุงูู |

---

## **Client โ Server**
| ุงูุญุฏุซ | ุงูุจูุงูุงุช | ุงููุตู |
|------|----------|--------|
| `typing` | chatId | ุฅุฑุณุงู ุญุงูุฉ "ุฌุงุฑู ุงููุชุงุจุฉ..." ูููุณุชุฎุฏู |

---

# โ๏ธ **Environment Variables**

```
# Telegram Bot Token
TELEGRAM_TOKEN=123456:ABC-DEF...

# Firebase Service Account (JSON ูุงูู ูู ุณุทุฑ ูุงุญุฏ)
FIREBASE_KEY={"type":"service_account","project_id":"...","private_key":"..."}

# Admin Panel Password
ADMIN_PASSWORD=secret123

# Optional port
PORT=3000
```

---

# ๐๏ธ **Technical Notes**

## **1. ูุนุงูุฌุฉ ุงููููุงุช (Multer)**  
- ูุณุชุฎุฏู `memoryStorage` โ ุงููููุงุช ุชูุฎุฒู ูุคูุชุงู ูู RAM.  
- ุชุฌูุจ ุฑูุน ูููุงุช ุฃูุจุฑ ูู 50MB ุนูู ุงูุงุณุชุถุงูุงุช ุงูุถุนููุฉ.

## **2. ุฃูุงู ุงูุฌูุณุงุช (Session Security)**  
- ูุณุชุฎุฏู:  
  ```js
  secret: "super-secret-key-change-it"
  ```  
- ุนูุฏ ุงูุชุดุบูู ุงููุนูู ูุฌุจ ุชุบููุฑู ููููุฉ ุนุดูุงุฆูุฉ ูู ุงูู.env.

## **3. Firebase**  
- ุงูุฑุงุจุท ุซุงุจุช ูู ุงูููุฏ:  
  ```
  https://ebe-plus-54785-default-rtdb.firebaseio.com
  ```  
- ุนูุฏ ุชุบููุฑ ูุดุฑูุน ูุงูุฑุจูุณ โ ูุฌุจ ุชุญุฏูุซู ูู `index.js`.

## **4. Proxy File Endpoint**  
- ุถุฑูุฑู ูุฃู ุฑูุงุจุท Telegram Media ูุคูุชุฉ ูุชูุชูู ุฎูุงู ุณุงุนุฉ.  
- ูููู ุจุนูู stream ูุจุงุดุฑ ููููู ูู ุชูููุฌุฑุงู ุฅูู ุงููุชุตูุญ.

---

# ๐ฏ **ููุฎุต ุงููุดุฑูุน (Technical Analysis)**

- **Backend:** Express.js ูุฅุฏุงุฑุฉ ุงูููุจ ููู ูุงูุฑุณุงุฆู ูุงูุชุฎุฒูู.  
- **Database:** Firebase Realtime Database ูุชุฎุฒูู ูู ุดูุก (ูุญุงุฏุซุงุช โ ูุณุชุฎุฏููู โ ุฑุณุงุฆู).  
- **Real-time:** Socket.io ูุฅุฑุณุงู ูุงุณุชูุจุงู ุงูุฃุญุฏุงุซ ุงููุญุธูุฉ ุจูู ุงููุชุตูุญ ูุงูุณูุฑูุฑ.  
- **Frontend:** ุตูุญุฉ HTML ูุงุญุฏุฉ (SPA) ูุน ููุทู ูุงูู ูุนุฑุถ ุงูุฑุณุงุฆู ูุงููุณุงุฆุท.  
- **Media Handling:** ูุง ููุฌุฏ ุชุฎุฒูู ูุญููุ ูู ุดูุก ูุชู ุนุจุฑ Proxy ูุจุงุดุฑ ูู Telegram.  
- **ูุฏู ุงููุธุงู:** ุฅูุดุงุก ููุญุฉ ุชุญูู ูููุฉุ ุณุฑูุนุฉุ ูุญุธูุฉุ ูุขููุฉ ูุฅุฏุงุฑุฉ ุจูุช ุชูููุฌุฑุงู.

---
